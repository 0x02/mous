# $FreeBSD: head/audio/mous/Makefile $

PORTNAME=	mous
PORTVERSION=	2.0.0
DISTVERSIONPREFIX= v
CATEGORIES=	audio
MASTER_SITES=	GH

MAINTAINER=	shen.elf@gmail.com
COMMENT=	Simple yet powerful audio player

LICENSE=	BSD2CLAUSE
LICENSE_FILE=	${WRKSRC}/LICENSE

USES=		cmake:outsource compiler:c++14-lang

USE_LDCONFIG=	yes
USE_GITHUB=	yes
GH_ACCOUNT=	bsdelf
GH_TAGNAME=	v2.0.0

OPTIONS_GROUP=	APPLICATION GENERIC_PLUGIN CODEC_PLUGIN
OPTIONS_GROUP_APPLICATION=	CLI NCURSES QT5
OPTIONS_GROUP_GENERIC_PLUGIN=	LIBCUE TAGLIB
OPTIONS_GROUP_CODEC_PLUGIN=	FDK_AAC FLAC LAME MAC \
				MPG123 VORBIS WAV WAVPACK

OPTIONS_RADIO=	OUTPUT_PLUGIN
OPTIONS_RADIO_OUTPUT_PLUGIN=	OSS SNDIO

OPTIONS_DEFAULT=	CLI NCURSES \
			LIBCUE TAGLIB \
			FDK_AAC FLAC LAME LIBCUE MAC \
			MPG123 VORBIS WAV WAVPACK \
			OSS

OPTIONS_SUB=		yes

CMAKE_ARGS+=	-DWITH_PLUGIN_ALSA=0 \
		-DWITH_PLUGIN_LIBAO=0 \
		-DWITH_PLUGIN_COREAUDIO=0 \
		-DWITH_PLUGIN_FAAC=0 \
		-DWITH_PLUGIN_FAAD=0 \
		-DWITH_PLUGIN_WMA=0

CLI_DESC=		Command line interface support
CLI_CMAKE_ON=	-DWITH_APP_CLI=1
CLI_CMAKE_OFF=	-DWITH_APP_CLI=0

NCURSES_USE=		ncurses
NCURSES_CMAKE_ON=	-DWITH_APP_NCURSES=1
NCURSES_CMAKE_OFF=	-DWITH_APP_NCURSES=0

QT5_USE=			qt5=core,gui,widgets,qmake_build
QT5_CMAKE_ON=		-DWITH_APP_QT5=1
QT5_CMAKE_OFF=		-DWITH_APP_QT5=0

TAGLIB_DESC=		TagLib support
TAGLIB_LIB_DEPENDS=	libtag.so:audio/taglib
TAGLIB_CMAKE_ON=	-DWITH_PLUGIN_TAGLIB=1
TAGLIB_CMAKE_OFF=	-DWITH_PLUGIN_TAGLIB=0

OSS_CMAKE_ON=		-DWITH_PLUGIN_OSS=1
OSS_CMAKE_OFF=		-DWITH_PLUGIN_OSS=0

SNDIO_LIB_DEPENDS=	libsndio.so:audio/sndio
SNDIO_CMAKE_ON=		-DWITH_PLUGIN_SNDIO=1
SNDIO_CMAKE_OFF=	-DWITH_PLUGIN_SNDIO=0

LIBCUE_DESC=	CUE sheet support
LIBCUE_LIB_DEPENDS=	libcue.so:textproc/libcue
LIBCUE_CMAKE_ON=	-DWITH_PLUGIN_LIBCUE=1
LIBCUE_CMAKE_OFF=	-DWITH_PLUGIN_LIBCUE=0

FDK_AAC_DESC=	FDK AAC codec support
FDK_AAC_LIB_DEPENDS=	libfdk-aac.so:audio/fdk-aac \
			libmp4v2.so:multimedia/mp4v2
FDK_AAC_CMAKE_ON=	-DWITH_PLUGIN_FDK_AAC=1
FDK_AAC_CMAKE_OFF=	-DWITH_PLUGIN_FDK_AAC=0

FLAC_LIB_DEPENDS=	libFLAC.so:audio/flac
FLAC_CMAKE_ON=		-DWITH_PLUGIN_FLAC=1
FLAC_CMAKE_OFF=		-DWITH_PLUGIN_FLAC=0

LAME_LIB_DEPENDS=	libmp3lame.so:audio/lame
LAME_CMAKE_ON=		-DWITH_PLUGIN_LAME=1
LAME_CMAKE_OFF=		-DWITH_PLUGIN_LAME=0

MAC_DESC=	Monkey's Audio codec support
MAC_CMAKE_ON=	-DWITH_PLUGIN_MAC=1
MAC_CMAKE_OFF=	-DWITH_PLUGIN_MAC=0

MPG123_LIB_DEPENDS=	libmpg123.so:audio/mpg123
MPG123_CMAKE_ON=	-DWITH_PLUGIN_MPG123=1
MPG123_CMAKE_OFF=	-DWITH_PLUGIN_MPG123=0

VORBIS_LIB_DEPENDS=	libogg.so:audio/libogg \
			libvorbis.so:audio/libvorbis\
			libvorbisenc.so:audio/libvorbis\
			libvorbisfile.so:audio/libvorbis
VORBIS_CMAKE_ON=	-DWITH_PLUGIN_OGG_VORBIS=1
VORBIS_CMAKE_OFF=	-DWITH_PLUGIN_OGG_VORBIS=0

WAV_CMAKE_ON=	-DWITH_PLUGIN_WAV=1
WAV_CMAKE_OFF=	-DWITH_PLUGIN_WAV=0

WAVPACK_LIB_DEPENDS=	libwavpack.so:audio/wavpack
WAVPACK_CMAKE_ON=	-DWITH_PLUGIN_WAVPACK=1
WAVPACK_CMAKE_OFF=	-DWITH_PLUGIN_WAVPACK=0

#post-patch:
#	@${REINPLACE_CMD} -e 's|%%DATADIR%%|${DATADIR}|g' \
#		-e 's|/usr/local|${LOCALBASE}|g' \
#		${WRKSRC}/CMakeLists.txt

.include <bsd.port.mk>
